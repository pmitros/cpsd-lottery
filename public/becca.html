<!DOCTYPE HTML>
<html>
  <head>
      <link crossorigin="anonymous" href="css/index.css" rel="stylesheet" />
      <link crossorigin="anonymous" href="css/new.css" rel="stylesheet" />
      <meta charset="UTF-8">
  </head>
  <body>

    <h1> School Choices for Kindergarten Lottery</h1>
    <p><i> Disclaimer: this site is by parents for parents. A group of us CPS parents, having gone through the lottery, want to share learnings to make it easier for new parents.  For official info, refer to <a target="_blank" href="http://www.cpsd.us/departments/frc/registering_for/january_kindergarten_lottery">CPSD site</a>.</i> This site is unfinished.</p>


    <br/><br/>

    <table border=1 cellspacing=0 cellpadding="4">
      <tr>
        <td>Elementary School (K-5)</td><td>Upper School(6-8)</td><td>High School (9-12)</td>
      </tr>

      <tr>
	<td colspan="2"><a href="#amigos" >Amigos</a> (Spanish Immersion)</td>
	<td rowspan="14">CRLS</td>
      </tr>
 
      <tr><td><a href="#klo">Kennedy-Longfellow</a></td><td rowspan="4">Putnam Ave</td></tr>
      <tr><td><a href="#morse">Morse</a></td></tr>
      <tr><td><a href="#mlk">MLK Non-immersion (nihao)</a></td> </tr>
      <tr><td><a href="#mlk-ci">Chinese Immersion@MLK</a></td></tr>

      <tr><td><a href="#baldwin">Baldwin</a></td><td rowspan="2">Rindge Ave</td> </tr>
      <tr><td><a href="#peabody">Peabody</a></td></tr>

      <tr><td><a href="#tobin">Tobin Montessori</a></td><td rowspan="3">Vassal Lane</td></tr>
      <tr><td><a href="#grahamandparks">Graham and Parks</a></td></tr>
      <tr><td><a href="#haggerty">Haggerty</a></td></tr>
      
      <tr><td><a href="#fma" >FMA</a></td><td rowspan="4">Cambridge St.</td></tr>
      <tr><td><a href="#kingopen">King Open</a></td></tr>
      <tr><td><a href="#kingopen-ola">Ola Portugese Immersion at King Open</a></td></tr>
      <tr><td><a href="#cambridgeport">Cambridgeport</a></td></tr>
    </table>
    <br/>
    <br/>
    <p>Map of schools</p>
    <a target="_blank" href="img/cambridgeSchools.png"><img width=400 src="img/cambridgeSchools.png"/>
    <br/>
    <!--<i>Click to zoom in new window.</i>-->
    </a>

    <div id="schoolsummary">
    </div>
    
    <div id="schoolinfo">
    </div>

    <div id="schooldemographics">
    </div>

    <script src="lib/jquery-3.2.1.min.js" type="text/javascript"></script>
    <script src="lib/showdown.min.js" type="text/javascript"></script>
    <script src="lib/js-yaml.js"></script>
    <script src="lib/handlebars.min.js"></script>

    <script id="school-head-template"  type="text/x-handlebars-template">
      <div class="overview">
	<h1>{{Name}}</h1>
	<p> At a glance: </p>
	<ul>
	  <li> Location: {{Address}} </li>
	  <li> Web site: {{Web}} </li>	    
	  <li> <a href="http://profiles.doe.mass.edu/general/general.aspx?topNavID=1&leftNavId=100&orgcode={{Web}}&orgtypecode=6">Massachusetts School Stats </a> </li>	    
	</ul>
      </div>
    </script>


    <script type="text/javascript">
      var converter = new showdown.Converter();
      var school_info = null;
      var template_source   = document.getElementById("school-head-template").innerHTML;
      var template = Handlebars.compile(template_source);

      function refresh() {
          var page_location = window.location.hash.substring(1);
      
          if(page_location == "") {
             page_location = "index";
          }
          console.log(page_location);
          $.ajax({url: "schools/"+page_location+".md"}).done(function( data ) {
          var html = converter.makeHtml(data);
          $("#schoolinfo").html(html);
             if(page_location != "index") {
                if (school_info != null) {
                   $("#schoolsummary").html(template(school_info[page_location]));
                }
             $("#schooldemographics").html('<img src="img/'+page_location+'.png"/>');
          }
        });
      }

      $(function() {
         $("#schoolinfo").html("Loading...");
         window.onhashchange = refresh;

         $.ajax({url: "schools.yaml"}).done(function( data ) {
            school_info = jsyaml.safeLoad(data);
            refresh();
         });
      
         refresh();
      });
    </script>
  </body>
</html>
